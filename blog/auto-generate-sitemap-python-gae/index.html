<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.bed2efcca611a7619966.css">@import url(https://fonts.googleapis.com/css?family=Bitter:400,400i|Maven+Pro:400,500,700|Open+Sans:400,400i,600,600i,700,700i&display=swap);nav{background-color:hsla(0,0%,100%,.9)!important}.uk-navbar-container a{font-family:Maven Pro,Helvetica,sans-serif!important;font-size:.8em!important;min-width:120px;text-align:center}.uk-navbar-container a.uk-active{color:#333;font-weight:600;text-decoration:overline}.anim-nav-container{position:fixed;top:0;left:0;z-index:2;display:grid;grid-template-columns:repeat(1,minmax(100px,1fr));grid-gap:1px;padding:0;cursor:pointer;will-change:width,height}.anim-nav-item{width:100%;height:100%;background:#000;will-change:transform}a{cursor:pointer!important}.uk-navbar-container{height:60px!important;margin:0!important;padding:0!important}nav img{min-width:60px}nav .uk-navbar-item{min-height:65px}nav .uk-navbar-toggle,nav li a{min-height:60px!important}a.home-icon{color:#888!important}a.hide-home-icon{display:none!important}#modal-root{position:fixed;z-index:999}.modal-background{background-color:rgba(0,0,0,.35);position:fixed;top:0;height:100vh;width:100vw;z-index:1}.modal-container{display:flex;flex-direction:column;justify-content:flex-start;height:100vh}.fullscreen-card .uk-card{padding-top:24px!important;height:100%;display:flex;flex-direction:column;justify-content:center}.fullscreen-card .uk-card-body{height:85%;overflow-y:scroll!important}.notification-card .uk-card{position:relative;display:flex;flex-direction:column;justify-content:space-around;border-radius:4px;margin:auto 24px}.modal-container .uk-card-footer{position:absolute;background-color:#fff;height:32px;bottom:24px;left:0;right:0}.modal-close-button{position:absolute;z-index:5;right:10px}.fullscreen-card .modal-close-button{top:55px}.notification-card .modal-close-button{top:10px}body{margin:0;position:relative}.uk-background-primary{background-color:#49839a!important}.uk-background-secondary{background-color:#37474f!important}@media (min-width:640px){.uk-margin-remove-left\@s{margin-left:0!important}.uk-margin-remove-right\@s{margin-right:0!important}.uk-margin-right\@s{margin-right:20px!important}.uk-margin-left\@s{margin-left:20px!important}.uk-margin-small-top\@s{margin-top:10px!important}.uk-margin-small-bottom\@s{margin-bottom:10px!important}.uk-margin-small-right\@s{margin-right:10px!important}.uk-margin-small-left\@s{margin-left:10px!important}.uk-margin-medium-top\@s{margin-top:40px!important}.uk-margin-medium-bottom\@s{margin-bottom:40px!important}.uk-margin-medium-right\@s{margin-right:40px!important}.uk-margin-medium-left\@s{margin-left:40px!important}.uk-margin-large-top\@s{margin-top:70px!important}.uk-margin-large-bottom\@s{margin-bottom:70px!important}.uk-margin-large-left\@s{margin-left:70px!important}.uk-margin-large-right\@s{margin-right:70px!important}}@media (min-width:960px){.uk-margin-remove-left\@m{margin-left:0!important}.uk-margin-remove-right\@m{margin-right:0!important}.uk-margin-small-top\@m{margin-top:10px!important}.uk-margin-small-bottom\@m{margin-bottom:10px!important}.uk-margin-medium-top\@m{margin-top:40px!important}.uk-margin-medium-bottom\@m{margin-bottom:40px!important}.uk-margin-large-top\@m{margin-top:70px!important}.uk-margin-large-bottom\@m{margin-bottom:70px!important}.uk-margin-medium-left\@m{margin-left:40px!important}.uk-margin-medium-right\@m{margin-right:40px!important}.uk-margin-large-left\@m{margin-left:70px!important}.uk-margin-large-right\@m{margin-right:70px!important}}@media (min-width:1200px){.uk-margin-remove-left\@l{margin-left:0!important}.uk-margin-remove-right\@l{margin-right:0!important}.uk-margin-small-top\@l{margin-top:10px!important}.uk-margin-small-bottom\@l{margin-bottom:10px!important}.uk-margin-medium-top\@l{margin-top:40px!important}.uk-margin-medium-bottom\@l{margin-bottom:40px!important}.uk-margin-large-top\@l{margin-top:70px!important}.uk-margin-large-bottom\@l{margin-bottom:70px!important}}@media (min-width:640px){.uk-padding-remove-left\@s{padding-left:0!important}.uk-padding-remove-right\@s{padding-right:0!important}.uk-padding-small-top\@s{padding-top:10px!important}.uk-padding-small-bottom\@s{padding-bottom:10px!important}.uk-padding-medium-top\@s{padding-top:40px!important}.uk-padding-medium-bottom\@s{padding-bottom:40px!important}.uk-padding-large-top\@s{padding-top:70px!important}.uk-padding-large-bottom\@s{padding-bottom:70px!important}}@media (min-width:960px){.uk-padding-remove-left\@m{padding-left:0!important}.uk-padding-remove-right\@m{padding-right:0!important}.uk-padding-small-top\@m{padding-top:10px!important}.uk-padding-small-bottom\@m{padding-bottom:10px!important}.uk-padding-medium-top\@m{padding-top:40px!important}.uk-padding-medium-bottom\@m{padding-bottom:40px!important}.uk-padding-large-top\@m{padding-top:70px!important}.uk-padding-large-bottom\@m{padding-bottom:70px!important}}@media (min-width:1200px){.uk-padding-remove-left\@l{padding-left:0!important}.uk-padding-remove-right\@l{padding-right:0!important}.uk-padding-small-top\@l{padding-top:10px!important}.uk-padding-small-bottom\@l{padding-bottom:10px!important}.uk-padding-medium-top\@l{padding-top:40px!important}.uk-padding-medium-bottom\@l{padding-bottom:40px!important}.uk-padding-large-top\@l{padding-top:70px!important}.uk-padding-large-bottom\@l{padding-bottom:70px!important}}.sc-only span{font-size:1!important;line-height:1!important;text-indent:-1px;position:absolute;width:0;height:0;padding:0;margin:-1000px;overflow:hidden;border:0}.uk-button{border-radius:3px;font-family:Maven Pro,Helvetica,Arial,sans-serif!important}.uk-button-success{background-color:#4caf50;color:#fff!important}.uk-button-success:hover{background-color:#388e3c;color:#eceff1!important}.card-brand{border-top:3px solid #f8981c}.text-background{line-height:1.75em;padding:2px 10px;color:#3c3c3c!important;border-radius:3px;white-space:nowrap!important}.text-background-red{background-color:rgba(255,205,210,.5)}.text-background-orange{background-color:rgba(255,224,178,.5)}.text-background-yellow{background-color:rgba(255,249,196,.5)}.text-background-green{background-color:rgba(200,230,201,.5)}.text-background-blue{background-color:rgba(187,222,251,.5)}.text-background-indigo{background-color:rgba(232,234,246,.5)}.text-background-violet{background-color:rgba(243,229,245,.5)}section h4.uk-heading-line{font-size:1.15rem;font-weight:700!important;font-family:Maven Pro,sans-serif!important}section h5.{font-size:1rem;font-weight:600!important;margin:0 auto 12px!important}@media (min-width:640px){section h4.uk-heading-line,section h5{font-size:1.25rem}}@media (min-width:768px){section h4.uk-heading-line{font-size:1.25rem}section h5{font-size:1rem}}html{font-size:16px!important}@media screen and (min-width:640px){html{font-size:calc(16px + 6*(100vw - 320px)/680)!important}}@media screen and (min-width:1000px){html{font-size:18px!important}}h1,h3{font-weight:400!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important}h4,h5,li,p{font-weight:400;-webkit-font-kerning:normal;font-kerning:normal}h2,h4,h5,li,p{font-family:Open Sans,Helvetica,sans-serif}h2{font-size:1.5rem;margin-bottom:0!important;padding-bottom:0!important;font-weight:400!important}h2.content-title,header h2{font-family:Maven Pro,Helvetica,Arial,sans-serif!important;font-weight:500!important}.content-lead,h2.content-title{text-align:left}.content-lead{font-size:1.125rem!important;color:#6c6c6c}@media (min-width:640px){h2.content-title{padding-left:50px;padding-right:50px}.content-lead,h2.content-title{text-align:center}}.uk-article-meta{font-size:10px!important}h3.uk-card-title{font-weight:400!important}@media (min-width:640px){h2{font-size:1.55rem!important}.header-lead{font-size:1.35rem!important}}@media (min-width:960px){h2{font-size:1.75rem!important}.header-lead{font-size:1.5rem!important}}h5{padding-bottom:6px!important;font-weight:600!important}h5,h6{margin-bottom:0!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important}h6{font-size:.879rem;padding-bottom:0!important;font-weight:400!important}.uk-breadcrumb li a,.uk-breadcrumb li span{font-size:11px!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important}.uk-breadcrumb li span{font-weight:600!important}.uk-breadcrumb>:nth-child(n+2):not(.uk-first-column):before{content:"/";display:inline-block;margin:0 8px;color:#aaa}h3.uk-section-title{font-size:1.35rem;margin:50px auto 35px!important;font-weight:400!important}.uk-h1,.uk-h2,.uk-h3,.uk-h4{font-family:Maven Pro,Helvetica,Arial,sans-serif!important;font-weight:500!important}.uk-h6{font-size:10px!important;text-transform:uppercase!important}header.hero-cta{height:40%;min-height:600px}.uk-slideshow-items{min-height:600px!important;height:40%!important}p.case-study-label{font-weight:400!important;font-family:Maven Pro,Helvetica,Arial,sans-serif!important;text-transform:uppercase;color:#fff!important}.case-study-header-title{font-size:1.75rem!important;font-weight:600!important;color:#fff!important}.uk-button.pink{color:pink!important}@media (max-width:640px){header{height:200px!important;min-height:200px!important}p.case-study-label{font-weight:400!important;text-transform:uppercase;color:#fff!important;font-size:7px}.uk-slideshow-items{min-height:200px!important;height:200px!important}.case-study-header-title{font-size:12px!important;font-weight:600!important;margin:0!important;padding:0!important}.uk-button-small{font-size:9px!important;line-height:9px!important;margin:5px auto!important;padding:5px!important}}.page-header h2{font-size:1.5rem!important;font-weight:500!important}.page-header p{font-size:1.25rem!important;font-weight:200!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important}@media (min-width:640px){.page-header{text-align:left}.page-header h2{font-size:2.25rem!important;font-weight:500!important}}.post-content h2{font-family:Maven Pro,Helvetica,Arial,sans-serif!important;font-weight:500!important;margin-top:32px!important;margin-bottom:16px!important}.post-content h5{font-size:1.125rem;margin:0;padding:1em 0}.post-content h6{text-align:center;font-weight:600;margin:0;padding:1em 0}.post-content p{margin:0 0 .75rem;padding:0}.post-content a{color:#000;text-decoration:underline}.post-content a.uk-button{color:#fff;text-decoration:none}.post-content em{color:#666}.post-content p>img+em{display:block;width:100%;text-align:center!important;font-size:14px!important;margin-top:.5em}.post-content blockquote{padding-left:48px;padding-right:48px}.post-content blockquote h3{color:#666!important;font-weight:400}.post-content hr{margin:0}.post-content .content-box{border:1px solid #d9d9d9;border-radius:3px;padding:25px!important}.blogMainImage{width:100%;object-fit:cover;object-position:center}.contentEmbed{padding:0;margin:30px 0;border-top:1px solid #d9d9d9;border-bottom:1px solid #d9d9d9}footer,footer h3{margin:0;padding:0}label{margin-top:35px!important;font-size:.879rem}.contact-form h4{color:#fff!important}.uk-notification-message{background-color:#1d1f21}.uk-notification-message,.uk-notification-message-danger{font-size:16px;text-align:center;color:#dfdfdf;border-radius:3px;box-shadow:2px 2px 10px rgba(0,0,0,.3)}.uk-notification-message-danger{background-color:#e53935}.email-received,.uk-modal-dialog{position:absolute!important;z-index:1001!important;top:0!important;left:0!important;right:0!important;bottom:0!important;height:100%!important;width:100%!important;background-color:#49839a!important}.top-wrap-height{height:80vh!important;min-height:460px;-webkit-transition:height .25s;transition:height .25s}.about-section h1{font-size:1.65rem}.about-section p.uk-text-lead{font-size:1.25rem;font-weight:400!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important;color:#666}.about-profile-header{width:100%}img.bio-image{min-width:100vw;height:100%!important;object-fit:cover!important}.about-profile-content p{padding-left:48px!important;padding-right:48px!important}@media (min-width:640px){.about-profile-content p{padding-left:160px!important;padding-right:160px!important}}section.modal-bio{border-style:none;overflow-y:scroll;-webkit-overflow-scrolling:touch}section.modal-bio .uk-close{position:absolute;top:60px!important;right:0!important;z-index:1}section.modal-bio button section.modal-bio a{margin-bottom:102px}.skills-tabs a{font-size:.75rem;font-weight:400}.skills-tabs .uk-tab:before{border-style:none!important}.skills-case-study-buttons a{margin-right:16px!important}.skills-tabs .uk-active a{color:#888!important;border-width:2px;border-color:#f8981c!important}.skills-tabs{margin:32px auto}.skills-content img{object-fit:cover!important;width:100%}.skills-content{box-shadow:0 30px 40px -20px rgba(0,0,0,.05)}.skills-content ul{padding:0!important;background-color:initial;line-height:1em}.skills-content ul li{padding:8px 0;font-size:.879em}.skills-content ul li:hover{background-color:#f8f8f8}.skills-content ul li small{color:#999}.skills-content .uk-card,.skills-content .uk-card-header{border-radius:4px 4px 0 0!important}.skills-content .uk-card-header p{color:#37474f;font-family:Maven Pro,serif;font-weight:600;text-transform:capitalize;text-align:center}.skills-content .case-study-list a{display:block;text-decoration:none;color:#666}.skills-section h4{margin-bottom:14px!important}.skills-section h4,.skills-section h5{font-family:Open Sans,Helvetica,Arial,sans-serif!important}.skills-section h5{color:#6c6c6c!important;margin:0 auto 12px!important;font-weight:400!important}.skills-section .uk-text-lead{font-weight:300}.skills-content li{font-family:Open Sans,Helvetica,Arial,sans-serif!important;color:#6c6c6c!important;margin:0 auto 6px!important}.mobile-skills-content-box{position:relative;background-color:#fff;margin:-64px 12px 40px!important;padding:16px!important;box-shadow:0 3px 10px 0 rgba(0,0,0,.1)}.case-study-link{font-size:.75rem;color:#999}.client-grid img{filter:grayscale(100%) opacity(70%);-webkit-filter:grayscale(100%) opacity(70%);-webkit-transition:-webkit-filter .75s;transition:-webkit-filter .75s;transition:filter .75s;transition:filter .75s,-webkit-filter .75s}.client-grid img:hover{filter:grayscale(0) opacity(100%);-webkit-filter:grayscale(0) opacity(100%)}.testimonials li p.uk-text-large{font-size:1.2rem!important;margin-bottom:1.5rem;font-family:Bitter,Georgia,Garamond,Times New Roman,serif;font-style:italic}.testimonials li p{font-size:12px;margin:0;padding:0}.portfolio-list small{font-size:12px!important;color:#ababab!important;padding:0!important}.portfolio-items .uk-card-media-top img{border-radius:2px}.portfolio-items .uk-h3{font-weight:500!important}.portfolio-header{text-align:left}@media (min-width:640px){.portfolio-header{text-align:center}}.portfolio-detail h5{font-family:Maven Pro,Helvetica,Arial,sans-serif!important;font-weight:500!important;margin-top:32px!important;margin-bottom:16px!important}.portfolio-detail .uk-label{font-size:9px!important;background-color:#f8f8f8!important;color:#90a4ae!important}.portfolio-detail h5:first-child{padding-top:0!important}.contentEmbed{margin-top:0!important;border-style:none!important}#priceModule .uk-card-header{font-size:1.5rem!important;font-weight:200;color:#000;border-style:none}#priceModule h3{font-size:1.275rem}.service-cost{font-size:1.75rem;font-weight:100}.service-cost span{font-size:3.5rem;font-weight:200;color:#333}.rates-content i{color:#f8981c;margin-top:24px!important}article,aside{padding-left:20px;padding-right:20px}aside{padding-bottom:100px}article{padding-bottom:35px}aside progress{margin-top:0!important}.skills-list h3,.work-experience h3{margin-top:50px!important;text-transform:uppercase;font-weight:400}.skills-list h3:first-child,.work-experience h3:first-child{margin-top:0!important}.uk-article-meta{font-size:12px!important}article h5,aside.skills-list h5{text-transform:uppercase;font-weight:500;font-size:12px!important}aside.skills-list .uk-text-small{font-size:11px!important}article .title{margin-bottom:15px}.work-experience .uk-article-title{margin-top:35px;font-size:1.5rem!important;font-family:Open Sans,Helvetica,Arial,sans-serif!important;color:#2c2c2c}.work-experience .uk-article-meta{font-family:Open Sans,Helvetica,Arial,sans-serif!important;text-transform:uppercase;margin:0!important;padding:0!important}.work-experience .uk-text-lead{font-size:1.124rem!important}.uk-progress{height:3px!important;margin-bottom:.5rem;background-color:rgba(0,0,0,.23)}*+.uk-progress{margin-top:.25rem}.uk-progress.one::-webkit-progress-value{background-color:#26c6da}.uk-progress.one::-moz-progress-bar{background-color:#26c6da}.uk-progress.one::-ms-fill{background-color:#26c6da}.uk-progress.two::-webkit-progress-value{background-color:#faa05a}.uk-progress.two::-moz-progress-bar{background-color:#faa05a}.uk-progress.two::-ms-fill{background-color:#faa05a}.uk-progress.three::-webkit-progress-value{background-color:#32d296}.uk-progress.three::-moz-progress-bar{background-color:#32d296}.uk-progress.three::-ms-fill{background-color:#32d296}.uk-progress.four::-webkit-progress-value{background-color:#9c27b0}.uk-progress.four::-moz-progress-bar{background-color:#9c27b0}.uk-progress.four::-ms-fill{background-color:#9c27b0}.uk-progress.five::-webkit-progress-value{background-color:#ef5350}.uk-progress.five::-moz-progress-bar{background-color:#ef5350}.uk-progress.five::-ms-fill{background-color:#ef5350}.uk-progress.six::-webkit-progress-value{background-color:#90a4ae}.uk-progress.six::-moz-progress-bar{background-color:#90a4ae}.uk-progress.six::-ms-fill{background-color:#90a4ae}</style><meta name="generator" content="Gatsby 2.19.16"/><title data-react-helmet="true">Auto-Generate your Sitemap.xml with Python and deploy it as a Cron job  to Google Cloud.</title><link data-react-helmet="true" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.3/css/uikit.min.css"/><script data-react-helmet="true" async="" src="//cdn.embedly.com/widgets/platform.js" charSet="UTF-8"></script><link rel="icon" href="/icons/icon-48x48.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#37474f"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=55610aeb3dd863a2e1d4c2fae0739ff8"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-9396407c8101c41a5b7c.js"/><link as="script" rel="preload" href="/app-e1cb72a636ec3c10d813.js"/><link as="script" rel="preload" href="/styles-54001d8a54d9266fe5ef.js"/><link as="script" rel="preload" href="/commons-928da970d8a349279f77.js"/><link as="script" rel="preload" href="/component---src-templates-blog-detail-js-28362a831d66459b2943.js"/><link as="fetch" rel="preload" href="/page-data/blog/auto-generate-sitemap-python-gae/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="navbar-container" data-uk-sticky="true"><div class="anim-nav-container uk-hidden@s" style="background:rgb(236, 239, 241, 0);width:80px;height:60px;z-index:1000"><div style="margin-top:8px" class="uk-padding-small uk-position-fixed uk-position-z-index"><span class="uk-float-left false" data-uk-icon="icon: menu; ratio: 0.9"></span><small class="uk-float-left uk-text-middle false"> Â <!-- -->MENU</small></div></div><nav class="uk-navbar-container" data-uk-navbar="true"><div class="uk-navbar-center uk-hidden@s"><a class="uk-navbar-item uk-logo" href="/"><img src="/static/astro-logo-3658d8d298d3420a1167cc5934bc3ca7.svg" width="60px" alt="Astro Logo" data-uk-image="true"/></a></div><div class="uk-navbar-left uk-margin-medium-left uk-visible@s"><a class="home-icon uk-link-muted uk-link-reset" href="/"><i data-uk-icon="icon: arrow-left; ratio: 0.95;"></i><i data-uk-icon="icon: home; ratio: 0.75;"></i></a></div><div class="uk-navbar-center uk-margin-medium-right uk-visible@s"><ul class="uk-navbar-nav"><li><a href="/portfolio">Work</a></li><li><a href="/resume">Resume</a></li><li><a class="uk-navbar-item uk-logo uk-visible@s" href="/"><img src="/static/astro-logo-3658d8d298d3420a1167cc5934bc3ca7.svg" width="55px" alt="Astro logo" data-uk-image="true"/></a></li><li><a href="/blog">Waste</a></li><li><a href="/contact">Contact</a></li></ul></div></nav></div><section class="uk-section uk-article"><div class="uk-container uk-container-small"><p class="uk-text-bold uk-h2 uk-margin-remove-adjacent uk-margin-remove-top">Auto-Generate your Sitemap.xml with Python and deploy it as a Cron job  to Google Cloud.</p><p class="uk-article-meta">Posted on <!-- -->January 9, 2019</p><p class="uk-text-lead uk-margin-bottom">A simple python script to automatically generate your sitemap.xml file using Cron on Google Cloud App Engine.</p></div><div class="post-content uk-container uk-container-small"><p>Sitemaps are useful for increasing the effectiveness of your SEO. If you head over to <a title="Google Search Console" href="https://search.google.com/search-console/about">Google&#x27;s Search Console</a> you&#x27;ll find a section to upload a file called <code>sitemap.xml</code>. </p><p>There are many ways to create this file, from writing it manually (tedious) to having one of many sites out there index your site and generate the file for you. Either of those options are fine for smaller, static websites, but what if you have a large, high traffic, data driven site with constant updates? Well, then you run into problems :-( </p><p>But the solution is very easy.</p><h4>This example is done in Python, but the idea is the same for any language.</h4><p>First, this is what <code>sitemap.xml</code> looks like.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">?</span>xml version<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;1.0&#x27;</span> encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">&gt;</span>
<span class="token" style="color:#a9b7c6">&lt;</span>urlset xmlns<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>
    xmlns<span class="token" style="color:#a9b7c6">:</span>xsi<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    xsi<span class="token" style="color:#a9b7c6">:</span>schemaLocation<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">yoursite</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">1.0</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">yoursite</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span>product<span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">0.8</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">yoursite</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span>product<span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#6897bb">2</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">0.8</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
  
  <span class="token spread" style="color:#a9b7c6">...</span>and so on <span class="token spread" style="color:#a9b7c6">...</span>
<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>urlset<span class="token" style="color:#a9b7c6">&gt;</span></code></pre><p>The first part is the XML declaration, which points to the schema on www.sitemaps.org. Following that are the nodes that point to pages on your website. As you can imagine, for large data driven websites with thousands of generated pages, maintaining this file can be really difficult.</p><h5>Let&#x27;s start coding.</h5><p>Start by opening a new file in your text editor and add this block of code to generate the XML declaration and root <code>&lt;url&gt;</code> node:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span> xml<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">etree</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">cElementTree</span> <span class="token module" style="color:#cc7832">as</span> <span class="token" style="color:#9876aa">ET</span>
<span class="token module" style="color:#cc7832">from</span> datetime <span class="token module" style="color:#cc7832">import</span> datetime

def <span class="token" style="color:#ffc66d">generate_sitemap</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">:</span>

    schema_loc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 &quot;</span>
                  <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">)</span>

    root <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">Element</span></span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;urlset&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns:xsi&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;http://www.w3.org/2001/XMLSchema-instance&#x27;</span>
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xsi:schemaLocation&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> schema_loc
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>
    
    tree <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">ElementTree</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">)</span>
        tree<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">write</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;sitemap.xml&quot;</span><span class="token" style="color:#a9b7c6">,</span>
                   encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">,</span> xml_declaration<span class="token" style="color:#a9b7c6">=</span><span class="token maybe-class-name">True</span><span class="token" style="color:#a9b7c6">)</span></code></pre><p>We&#x27;ve started by importing <code>xml.etree.cElementTree</code>, a built-in python package for parsing XML. Then we created a function called <code>generate_sitemap()</code>, in which we define XML schema info and the <code>&lt;urlset&gt;</code> node.</p><p>At this point, if you were to run this block of code in your Python Console, it would generate a sitemap.xml file in the current directory that looks sort of like this:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">?</span>xml version<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;1.0&#x27;</span> encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">&gt;</span>
<span class="token" style="color:#a9b7c6">&lt;</span>urlset xmlns<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>
    xmlns<span class="token" style="color:#a9b7c6">:</span>xsi<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    xsi<span class="token" style="color:#a9b7c6">:</span>schemaLocation<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">&gt;</span></code></pre><p>So we&#x27;re off to a good start! Now under that, we&#x27;re going to write code to generate our static pages like home page, login, registration, etc.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">_url <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;https://www.your-website.com/&quot;</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Your</span> website domain<span class="token" style="color:#a9b7c6">.</span>
<span class="token property-access">dt</span> <span class="token" style="color:#a9b7c6">=</span> datetime<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">now</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">strftime</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;%Y-%m-%d&quot;</span><span class="token" style="color:#a9b7c6">)</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Get</span> current date and time<span class="token" style="color:#a9b7c6">.</span>

<span class="token property-access">doc</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> _url
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;1.0&quot;</span>

doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span>f<span class="token" style="color:#6a8759">&quot;{_url}login/&quot;</span><span class="token" style="color:#a9b7c6">)</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>

doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}register/&quot;</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
<span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span></code></pre><p>Just a lot of copy/paste going on. Let&#x27;s break down what&#x27;s happening here. We&#x27;ve set two variables:</p><ul><li><code>_url</code> is your website root url.</li><li><code>dt</code> is the current date/time formatted as YYYY-MM-DD</li></ul><p>Next we create the <code>&lt;url&gt;</code> node as a sub element to the document like this: <code>doc = ET.SubElement(root, &quot;url&quot;)</code>. Then we create the <code>&lt;loc&gt;</code>, <code>&lt;lastmod&gt;</code>, <code>&lt;changefreq&gt;</code>, and <code>&lt;priority&gt;</code> nodes, which are child nodes of the <code>&lt;url&gt;</code> node.</p><p>Just for the sake of clarity, <code>f&quot;{_url}login/&quot;</code> is using string interpolation formatting to create your page URL. In this case, Python will render the string as <code>https://www.your-website.com/login</code>. This save us from having to write out your website URL over and over again.</p><p>If we were to run this code now, it will generate a file that looks like this:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">?</span>xml version<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;1.0&#x27;</span> encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">?</span><span class="token" style="color:#a9b7c6">&gt;</span>
<span class="token" style="color:#a9b7c6">&lt;</span>urlset xmlns<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>
    xmlns<span class="token" style="color:#a9b7c6">:</span>xsi<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    xsi<span class="token" style="color:#a9b7c6">:</span>schemaLocation<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">your</span><span class="token" style="color:#a9b7c6">-</span>website<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">1.0</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">your</span><span class="token" style="color:#a9b7c6">-</span>website<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span>login<span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">0.8</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>https<span class="token" style="color:#a9b7c6">:</span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">/</span>www<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">your</span><span class="token" style="color:#a9b7c6">-</span>website<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">com</span><span class="token" style="color:#a9b7c6">/</span>register<span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>loc<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">2019</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">03</span><span class="token" style="color:#a9b7c6">-</span><span class="token" style="color:#6897bb">29</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>lastmod<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>weekly<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>changefreq<span class="token" style="color:#a9b7c6">&gt;</span>
		<span class="token" style="color:#a9b7c6">&lt;</span>priority<span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#6897bb">0.8</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>priority<span class="token" style="color:#a9b7c6">&gt;</span>
	<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>url<span class="token" style="color:#a9b7c6">&gt;</span>
<span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span>urlset<span class="token" style="color:#a9b7c6">&gt;</span></code></pre><p>Pretty cool, right? But what about all those web pages that are generated by your CMS or database? I mean, we can&#x27;t possibly copy/paste that much stuff.</p><h5>Querying your database</h5><p>For this part I&#x27;m using Django as my frontend to Python. Again, you can use whatever framework or language you want, the idea is still the same. Open your Django app and copy/paste your code into views.py, updating it with the code below.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span> xml<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">etree</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">cElementTree</span> <span class="token module" style="color:#cc7832">as</span> <span class="token" style="color:#9876aa">ET</span>
<span class="token module" style="color:#cc7832">from</span> datetime <span class="token module" style="color:#cc7832">import</span> datetime

<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">http</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">HttpResponse</span> # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">We</span> need <span class="token" style="color:#cc7832">this</span> to <span class="token" style="color:#cc7832">return</span> a response
<span class="token module" style="color:#cc7832">from</span> <span class="token" style="color:#a9b7c6">.</span><span class="token property-access">models</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">MyProductModel</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Import</span> my model


def <span class="token" style="color:#ffc66d">generate_sitemap</span><span class="token" style="color:#a9b7c6">(</span>request<span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">:</span>

    _url <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;https://www.your-website.com/&quot;</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Your</span> website domain<span class="token" style="color:#a9b7c6">.</span>
    <span class="token property-access">dt</span> <span class="token" style="color:#a9b7c6">=</span> datetime<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">now</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">strftime</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;%Y-%m-%d&quot;</span><span class="token" style="color:#a9b7c6">)</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Get</span> current date and time<span class="token" style="color:#a9b7c6">.</span>

    <span class="token property-access">doc</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> _url
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;1.0&quot;</span>

    doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span>f<span class="token" style="color:#6a8759">&quot;{_url}login/&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>

    doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}register/&quot;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>
    
    <span class="token" style="color:#cc7832">return</span> <span class="token" style="color:#ffc66d"><span class="token maybe-class-name">HttpResponse</span></span><span class="token" style="color:#a9b7c6">(</span>status<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;200&quot;</span><span class="token" style="color:#a9b7c6">)</span></code></pre><p>We&#x27;ve imported our database model <code>MyProductModel</code>, and since we&#x27;re using Django, we updated our <code>generate_sitemap</code> function with the <code>request</code> argument and we added an HTTP response. </p><p>In short, we&#x27;ve made our sitemap.xml generator into a web page. I&#x27;ll explain why further down. But first, let&#x27;s write the code to generate all of our product pages in the CMS.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">products <span class="token" style="color:#a9b7c6">=</span> <span class="token maybe-class-name">MyProductModel</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">objects</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">all</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span>

<span class="token" style="color:#cc7832">for</span> product <span class="token" style="color:#cc7832">in</span> products<span class="token" style="color:#a9b7c6">:</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Loop</span> through product queryset
  doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}{product.slug}/&quot;</span>
        <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
        <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
        <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.8&quot;</span></code></pre><p>What we&#x27;ve done here is query our database for all &quot;product&quot; pages with <code>MyProductModel.objects.all()</code>, then loop through the queryset to generate <code>&lt;url&gt;</code> nodes for every page. This could be 10 products or 1000 or even more.</p><p>Let&#x27;s look at our <code>&lt;loc&gt;</code> node. We were smart from the beginning when we added products to our system because we added slug fields. So instead of a URL like <code>your-website.com/1028346?sku=28473849/</code> our product page urls are pretty like <code>your-website.com/good-life-product/</code>.</p><p>Anyway, the final code looks like this:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span> xml<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">etree</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">cElementTree</span> <span class="token module" style="color:#cc7832">as</span> <span class="token" style="color:#9876aa">ET</span>
<span class="token module" style="color:#cc7832">from</span> datetime <span class="token module" style="color:#cc7832">import</span> datetime

<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">http</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">HttpResponse</span>
<span class="token module" style="color:#cc7832">from</span> <span class="token" style="color:#a9b7c6">.</span><span class="token property-access">models</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">MyProductModel</span>


def <span class="token" style="color:#ffc66d">generate_sitemap</span><span class="token" style="color:#a9b7c6">(</span>request<span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">:</span>

    _url <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;https://www.your-website.com/&quot;</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Your</span> website domain<span class="token" style="color:#a9b7c6">.</span>
    <span class="token property-access">dt</span> <span class="token" style="color:#a9b7c6">=</span> datetime<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">now</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">strftime</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;%Y-%m-%d&quot;</span><span class="token" style="color:#a9b7c6">)</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Get</span> current date and time<span class="token" style="color:#a9b7c6">.</span>
    
    <span class="token property-access">schema_loc</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 &quot;</span>
                  <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">)</span>

    root <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">Element</span></span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;urlset&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns:xsi&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;http://www.w3.org/2001/XMLSchema-instance&#x27;</span>
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xsi:schemaLocation&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> schema_loc
    root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>

    doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> _url
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;1.0&quot;</span>

    doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span>f<span class="token" style="color:#6a8759">&quot;{_url}login/&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>

    doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}register/&quot;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
    <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>
    
    products <span class="token" style="color:#a9b7c6">=</span> <span class="token maybe-class-name">MyProductModel</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">objects</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">all</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span>

    <span class="token" style="color:#cc7832">for</span> product <span class="token" style="color:#cc7832">in</span> products<span class="token" style="color:#a9b7c6">:</span>
      doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
            <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}{product.slug}/&quot;</span>
            <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
            <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
            <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.8&quot;</span>
            
    tree <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">ElementTree</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">)</span>
        tree<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">write</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;sitemap.xml&quot;</span><span class="token" style="color:#a9b7c6">,</span>
                   encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">,</span> xml_declaration<span class="token" style="color:#a9b7c6">=</span><span class="token maybe-class-name">True</span><span class="token" style="color:#a9b7c6">)</span>
    
    <span class="token" style="color:#cc7832">return</span> <span class="token" style="color:#ffc66d"><span class="token maybe-class-name">HttpResponse</span></span><span class="token" style="color:#a9b7c6">(</span>status<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;200&quot;</span><span class="token" style="color:#a9b7c6">)</span></code></pre><h5>Adding the page to your urls.py</h5><p>For Google to read your sitemap it needs to be rendered as a static XML file and available in your root as <code>your-website.com/sitemap.xml</code>. This means we need to add it to our URL patterns as a <code>TemplateView</code> in our urls.py.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"># project<span class="token" style="color:#a9b7c6">/</span>urls<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">py</span>

<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">conf</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">urls</span> <span class="token module" style="color:#cc7832">import</span> url
<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">views</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">generic</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">TemplateView</span>

urlpatterns <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">[</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^sitemap\.xml$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;sitemap.xml&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;text/xml&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
<span class="token" style="color:#a9b7c6">]</span></code></pre><p><code>TemplateView</code> will load sitemap.xml, as a static file, from the root of your templates directory. Remember you need to set the content_type to <code>text/xml</code> if you want the file to render correctly.</p><div><div class="uk-child-width-2-3@s uk-margin-large-top uk-margin-medium-bottom" uk-grid>
  <div>
    <div class="uk-panel uk-background-primary uk-light uk-padding-small uk-border-rounded">
      On a side note, you can load other static files using `TemplateView`. Here's an example of a boilerplate I use to serve robots.txt, ServiceWorker.js, and manifest.json.
    </div>
  </div>
</div></div><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">conf</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">urls</span> <span class="token module" style="color:#cc7832">import</span> url
<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">views</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">generic</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">TemplateView</span>


urlpatterns <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">[</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^manifest\.json$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;manifest.json&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;application/manifest+json&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^ServiceWorker\.js$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;ServiceWorker.js&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;application/javascript&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^robots\.txt$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;robots.txt&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;text/plain&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^sitemap\.xml$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;sitemap.xml&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;text/xml&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
    <span class="token" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>r<span class="token" style="color:#6a8759">&#x27;^offline\.html$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        <span class="token maybe-class-name">TemplateView</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">as_view</span><span class="token" style="color:#a9b7c6">(</span>
            template_name<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;offline.html&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
            content_type<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;text/html&#x27;</span>
            <span class="token" style="color:#a9b7c6">)</span>
        <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
<span class="token" style="color:#a9b7c6">]</span></code></pre><h5>Google Cloud App Engine <!-- -->&amp;<!-- --> Cron jobs</h5><p>Okay, so we have a url pattern set up to serve our sitemap.xml for search spiders, but how do we generate the file?</p><p>We&#x27;re going to create a Cron job that automatically runs every couple of weeks, to generate our sitemap.xml, and save it to our templates directory.</p><div><div class="uk-child-width-2-3@s uk-margin-large-top uk-margin-medium-bottom" uk-grid>
  <div>
    <div class="uk-panel uk-background-primary uk-light uk-padding-small uk-border-rounded">
      I'm not going to go into detail about setting up your project on Google Cloud, that's a whole other story. And again, you could be using another platform like AWS or even hosting yourself, it doesn't matter.
    </div>
  </div>
</div></div><p>Let&#x27;s create a url pattern for our <code>generate_sitemap</code> view and add it to the app urls.py:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"># app<span class="token" style="color:#a9b7c6">/</span>urls<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">py</span>

<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">conf</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">urls</span> <span class="token module" style="color:#cc7832">import</span> url

<span class="token module" style="color:#cc7832">from</span> <span class="token" style="color:#a9b7c6">.</span> <span class="token module" style="color:#cc7832">import</span> views

urlpatterns <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">[</span>

    <span class="token spread" style="color:#a9b7c6">...</span> other url patterns <span class="token spread" style="color:#a9b7c6">...</span>
    
    <span class="token method property-access" style="color:#ffc66d">url</span><span class="token" style="color:#a9b7c6">(</span>
        r<span class="token" style="color:#6a8759">&#x27;^generate-sitemap/$&#x27;</span><span class="token" style="color:#a9b7c6">,</span>
        views<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">generate_sitemap</span>
    <span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span>
<span class="token" style="color:#a9b7c6">]</span></code></pre><p>Now you should be able to visit <a href="http://localhost:8000/generate-sitemap/">http://localhost:8000/generate-sitemap/</a> and your sitemap function will create the sitemap.xml file in your templates directory.</p><p>Excellent.</p><p>Next, in your project root directory, create a file called <code>cron.yaml</code> then add this:</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"># root<span class="token" style="color:#a9b7c6">/</span>cron<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">yaml</span>

cron<span class="token" style="color:#a9b7c6">:</span>
<span class="token" style="color:#a9b7c6">-</span> description<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#6a8759">&quot;Generate MySitemap CRON&quot;</span>
  url<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="background:#364135"><span class="token regex-delimiter">/</span><span class="token language-regex">generate-sitemap</span><span class="token regex-delimiter">/</span></span>
  schedule<span class="token" style="color:#a9b7c6">:</span> every <span class="token" style="color:#6897bb">14</span> days
  retry_parameters<span class="token" style="color:#a9b7c6">:</span>
    min_backoff_seconds<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#6897bb">120</span>
    max_doublings<span class="token" style="color:#a9b7c6">:</span> <span class="token" style="color:#6897bb">5</span></code></pre><p>This creates a Cron job for App Engine that will visit your generate_sitemap function at <code>www.your-website/generate-sitemap/</code> every 14 days to generate an updated sitemap.xml file and save it to your templates directory so that it&#x27;s accessible by Google and other search engines.</p><p>Push the Cron job to App Engine with this terminal command:</p><p><code>gcloud app deploy cron.yaml</code></p><p>Then visit your Google Console, under App Engine, you&#x27;ll see a link for Cron jobs, where you&#x27;ll find your new &quot;Generate MySitemap CRON&quot; job listed.</p><p><img alt="cron" src="//images.ctfassets.net/1nc0h0ipk4bl/3UnANf5TSGhKxHxwCe4e1i/8ffd2b1f499040d54d5b06ad057119c8/cron.png"/></p><p>Okay, you now have a Cron job set up to visit your sitemap generator every 14 days. But, there&#x27;s a problem...</p><h5>Security?</h5><p>We don&#x27;t want just anybody to have access, we only want our Cron job to access the function. But then, we can&#x27;t give the Cron job admin access either.</p><p>So, we&#x27;re going to use headers to exclude any connections not from our Cron job. This is safe because the <code>x-appengine-cron</code> header is only passed within Google&#x27;s network, meaning it&#x27;s unlikely to be spoofed.</p><p>We need to update our view to block everybody except our Cron job.</p><pre style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span> xml<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">etree</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">cElementTree</span> <span class="token module" style="color:#cc7832">as</span> <span class="token" style="color:#9876aa">ET</span>
<span class="token module" style="color:#cc7832">from</span> datetime <span class="token module" style="color:#cc7832">import</span> datetime

<span class="token module" style="color:#cc7832">from</span> django<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">http</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">HttpResponse</span>
<span class="token module" style="color:#cc7832">from</span> <span class="token" style="color:#a9b7c6">.</span><span class="token property-access">models</span> <span class="token module" style="color:#cc7832">import</span> <span class="token maybe-class-name">MyProductModel</span>


def <span class="token" style="color:#ffc66d">generate_sitemap</span><span class="token" style="color:#a9b7c6">(</span>request<span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">:</span>

    _url <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;https://www.your-website.com/&quot;</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Your</span> website domain<span class="token" style="color:#a9b7c6">.</span>
    <span class="token property-access">dt</span> <span class="token" style="color:#a9b7c6">=</span> datetime<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">now</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">strftime</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;%Y-%m-%d&quot;</span><span class="token" style="color:#a9b7c6">)</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Get</span> current date and time<span class="token" style="color:#a9b7c6">.</span>
    
    <span class="token property-access">schema_loc</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9 &quot;</span>
                  <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;</span><span class="token" style="color:#a9b7c6">)</span>
                  
    <span class="token" style="color:#cc7832">if</span> request<span class="token" style="color:#a9b7c6">.</span><span class="token" style="color:#9876aa">META</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&#x27;HTTP_X_APPENGINE_CRON&#x27;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">:</span>  #  <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> check <span class="token" style="color:#cc7832">if</span> the x<span class="token" style="color:#a9b7c6">-</span>appengine<span class="token" style="color:#a9b7c6">-</span>cron header exists
      root <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">Element</span></span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;urlset&quot;</span><span class="token" style="color:#a9b7c6">)</span>
      root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns:xsi&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;http://www.w3.org/2001/XMLSchema-instance&#x27;</span>
      root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xsi:schemaLocation&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> schema_loc
      root<span class="token" style="color:#a9b7c6">.</span><span class="token property-access">attrib</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&#x27;xmlns&#x27;</span><span class="token" style="color:#a9b7c6">]</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span>

      doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> _url
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;1.0&quot;</span>

      doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#a9b7c6">(</span>f<span class="token" style="color:#6a8759">&quot;{_url}login/&quot;</span><span class="token" style="color:#a9b7c6">)</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>

      doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}register/&quot;</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
      <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.6&quot;</span>

      products <span class="token" style="color:#a9b7c6">=</span> <span class="token maybe-class-name">MyProductModel</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">objects</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">all</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span>

      <span class="token" style="color:#cc7832">for</span> product <span class="token" style="color:#cc7832">in</span> products<span class="token" style="color:#a9b7c6">:</span>
        doc <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;url&quot;</span><span class="token" style="color:#a9b7c6">)</span>
              <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;loc&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> f<span class="token" style="color:#6a8759">&quot;{_url}{product.slug}/&quot;</span>
              <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;lastmod&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> dt
              <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;changefreq&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&#x27;weekly&#x27;</span>
              <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">SubElement</span></span><span class="token" style="color:#a9b7c6">(</span>doc<span class="token" style="color:#a9b7c6">,</span> <span class="token" style="color:#6a8759">&quot;priority&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">text</span> <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#6a8759">&quot;0.8&quot;</span>

      tree <span class="token" style="color:#a9b7c6">=</span> <span class="token" style="color:#9876aa">ET</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d"><span class="token maybe-class-name">ElementTree</span></span><span class="token" style="color:#a9b7c6">(</span>root<span class="token" style="color:#a9b7c6">)</span>
          tree<span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">write</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;sitemap.xml&quot;</span><span class="token" style="color:#a9b7c6">,</span>
                     encoding<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&#x27;utf-8&#x27;</span><span class="token" style="color:#a9b7c6">,</span> xml_declaration<span class="token" style="color:#a9b7c6">=</span><span class="token maybe-class-name">True</span><span class="token" style="color:#a9b7c6">)</span>

      <span class="token" style="color:#cc7832">return</span> <span class="token" style="color:#ffc66d"><span class="token maybe-class-name">HttpResponse</span></span><span class="token" style="color:#a9b7c6">(</span>status<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;200&quot;</span><span class="token" style="color:#a9b7c6">)</span>
    <span class="token" style="color:#cc7832">else</span><span class="token" style="color:#a9b7c6">:</span>
      <span class="token" style="color:#cc7832">return</span> <span class="token" style="color:#ffc66d"><span class="token maybe-class-name">HttpResponse</span></span><span class="token" style="color:#a9b7c6">(</span>status<span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;403&quot;</span><span class="token" style="color:#a9b7c6">)</span>  # <span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">--</span> <span class="token maybe-class-name">Return</span> <span class="token" style="color:#6a8759">&quot;Not Allowed&quot;</span> <span class="token" style="color:#cc7832">for</span> everybody <span class="token" style="color:#cc7832">else</span><span class="token" style="color:#a9b7c6">.</span></code></pre><p>Now you can deploy your project <code>gcloud app deploy</code> and test your Cron job by clicking the &quot;Run now&quot; button on your Cron page on Google Console.</p><p>And that&#x27;s it!</p></div></section><section class="contact-section uk-section uk-section-expand uk-background-secondary uk-light"><div class="uk-container uk-container-small" data-uk-scrollspy="cls: uk-animation-slide-bottom-medium; target: div &gt; *; repeat: true;"><div class="uk-width-3-5@s"><p class="uk-h6 uk-text-muted uk-margin-small-bottom uk-text-uppercase"><strong>â</strong> Let&#x27;s do great things</p><p class="uk-h2 uk-margin-remove-top"><span class="uk-margin-bottom uk-display-block">Get in touch to talk about your next project.</span></p></div></div></section><section class="uk-section uk-section-expand uk-margin-remove-top uk-padding-remove uk-background-secondary uk-light"><div class="uk-container uk-container-small" uk-scrollspy="cls: uk-animation-fade; delay: 500;"><div class="uk-grid-medium uk-child-width-1-2@m" data-uk-grid="true"><div><p class="uk-h4">Create experiences that people love.</p><p>I work with future-thinking brands, agencies and startups looking to create the next killer product or campaign.</p><p>If that sounds like you, get in touch.</p><div class="uk-width-1-1 uk-margin-medium-top" data-uk-grid="true"><div class="sc-only uk-width-1-1" data-uk-grid="true"><div class="uk-align-left"><a href="https://www.linkedin.com/in/lisboa/" class="uk-icon-button uk-margin-right" data-uk-icon="linkedin"><span>LinkedIn</span></a><a href="http://michael_lisboa.dribbble.com/" class="uk-icon-button uk-margin-right" data-uk-icon="dribbble"><span>Dribbble</span></a><a href="https://github.com/MichaelLisboa" class="uk-icon-button uk-margin-right" data-uk-icon="github"><span>GitHub</span></a><a href="https://www.instagram.com/michael__lisboa/" class="uk-icon-button" data-uk-icon="instagram"><span>Instagram</span></a></div></div></div></div><div><p class="uk-h4"><span class="uk-float-left uk-margin-small-right" data-uk-icon="icon: mail; ratio: 1.75"></span><span>Send an email</span></p><form id="contactForm" class="uk-form"><fieldset class="uk-fieldset"><div class="uk-margin-small-top"><label for="first_name" class="uk-text-muted">First name <input type="text" name="first_name" value="" class="uk-input uk-form-large " maxLength="75" required=""/></label></div><div class="uk-margin-small-top"><label for="last_name" class="uk-text-muted">Last name <input type="text" name="last_name" value="" class="uk-input uk-form-large " maxLength="75" required=""/></label></div><div class="uk-margin-small-top"><label for="from_email" class="uk-text-muted">Email address <input type="text" name="from_email" value="" class="uk-input uk-form-large " maxLength="100" required=""/></label></div><div class="uk-margin-small-top"><label for="comment" class="uk-text-muted">Your message <textarea name="comment" rows="3" class="uk-textarea uk-form-large " maxLength="1000" required=""></textarea></label></div><div class="uk-margin-large-bottom uk-margin-medium-top uk-text-right"><button type="submit" class="uk-button uk-button-large uk-button-default uk-width-1-2 uk-width-1-3@s" disabled="">Send</button></div></fieldset></form></div></div></div></section><footer class="uk-container uk-container-expand uk-margin-remove-top uk-padding-remove uk-background-secondary uk-light"><div class="uk-container uk-container-expand uk-padding-remove uk-margin-remove-vertical"><div class="uk-text-center uk-padding uk-padding-remove-horizontal"><span class="uk-text-small uk-text-light">Â©2020 Michael Lisboa â¢ Â <a href="/contact"><span data-uk-icon="icon: mail; ratio: 0.75"></span>Â Contact me</a></span></div></div></footer></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-137372309-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/auto-generate-sitemap-python-gae";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e1cb72a636ec3c10d813.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-9edabb9556448a6822d1.js"],"component---src-templates-blog-detail-js":["/component---src-templates-blog-detail-js-28362a831d66459b2943.js"],"component---src-templates-portfolio-detail-js":["/component---src-templates-portfolio-detail-js-136726437bb2ba38da3b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-60cca99eea748634fd7a.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-d37173c0f7af32058598.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-2c8917a6db607ccc9da0.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c6eb829eb008ccd0a151.js"],"component---src-pages-portfolio-js":["/component---src-pages-portfolio-js-bd820bdf4161c76f2565.js"],"component---src-pages-rates-js":["/component---src-pages-rates-js-829b44ae8b29d9ff9ea3.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-9e6f46418a3b3ca8fba0.js"]};/*]]>*/</script><script src="/component---src-templates-blog-detail-js-28362a831d66459b2943.js" async=""></script><script src="/commons-928da970d8a349279f77.js" async=""></script><script src="/styles-54001d8a54d9266fe5ef.js" async=""></script><script src="/app-e1cb72a636ec3c10d813.js" async=""></script><script src="/webpack-runtime-9396407c8101c41a5b7c.js" async=""></script></body></html>